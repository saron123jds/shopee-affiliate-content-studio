{% extends "base.html" %}
{% block content %}
<div class="card p-4">
  <div class="d-flex align-items-center justify-content-between">
    <div>
      <div class="fs-4 fw-semibold">{{ "Novo produto" if not p else "Editar produto" }}</div>
      <div class="text-soft">Cole links das imagens (1 por linha) e o link de afiliado.</div>
    </div>
    <a class="btn btn-soft rounded-4" href="{{ url_for('products') }}">Voltar</a>
  </div>

  <form class="mt-4" method="post">
    <div class="row g-3">
      <div class="col-lg-8">
        <label class="form-label text-soft">Título</label>
        <input class="form-control" name="title" required value="{{ '' if not p else p.title }}">
      </div>
      <div class="col-lg-4">
        <label class="form-label text-soft">Categoria (ex: moda feminina)</label>
        <input class="form-control" name="category" value="{{ '' if not p else p.category }}" placeholder="moda feminina">
      </div>

      <div class="col-lg-4">
        <label class="form-label text-soft">Preço (opcional)</label>
        <input class="form-control" name="price" value="{{ '' if not p else p.price }}" placeholder="R$ 79,90">
      </div>
      <div class="col-lg-8">
        <label class="form-label text-soft">Link de afiliado</label>
        <input class="form-control" name="affiliate_link" value="{{ '' if not p else p.affiliate_link }}" placeholder="Cole aqui o seu link de afiliado">
      </div>

      <div class="col-lg-12">
        <label class="form-label text-soft">Links das imagens (1 por linha)</label>
        <textarea class="form-control" name="image_urls" rows="4" placeholder="https://...jpg">{{ '' if not p else p.image_urls }}</textarea>
      </div>

      <div class="col-lg-12">
        <label class="form-label text-soft">Notas (benefícios, detalhes, variações)</label>
        <textarea class="form-control" name="notes" rows="3" placeholder="Ex: Tecido leve, caimento perfeito, tamanhos do P ao GG.">{{ '' if not p else p.notes }}</textarea>
      </div>
    </div>

    <div class="mt-4 d-flex gap-2">
      <button class="btn btn-light rounded-4">{{ "Salvar" if p else "Cadastrar" }}</button>
      {% if p %}
      <form method="post" action="{{ url_for('product_generate', pid=p.id) }}">
        <button class="btn btn-soft rounded-4" type="submit">Gerar legenda</button>
      </form>
      {% endif %}
    </div>
  </form>
</div>
{% endblock %}
